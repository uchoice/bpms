<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.uchoice.activiti.dao.ActDelegateDao">
    
	<sql id="actDelegateColumns">
		a.id AS "id",
		a.task_id AS "taskId",
		a.delegate AS "delegate",
		a.delegated AS "delegated"
	</sql>
	
	<sql id="actDelegateJoins">
	</sql>
    
	<select id="get" resultType="ActDelegate">
		SELECT 
			<include refid="actDelegateColumns"/>
		FROM act_delegate a
		<include refid="actDelegateJoins"/>
		WHERE a.id = #{id}
	</select>
	
	<select id="findList" resultType="ActDelegate">
		SELECT 
			<include refid="actDelegateColumns"/>
		FROM act_delegate a
		<include refid="actDelegateJoins"/>
		<where>
			<if test="delegate != null and delegate != ''">
				delegate = #{delegate}
			</if>
			<if test="delegated != null and delegated != ''">
				delegated = #{delegated}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<select id="findListByTaksIds" resultType="ActDelegate">
		SELECT 
			<include refid="actDelegateColumns"/>
		FROM act_delegate a
		<include refid="actDelegateJoins"/>
		WHERE
		delegate = #{delegate}
		AND task_id in
		<foreach collection="taskIds" open="(" close=")" separator="," item="taskId">
			#{taskId}
		</foreach>
	</select>
	
	<select id="findAllList" resultType="ActDelegate">
		SELECT 
			<include refid="actDelegateColumns"/>
		FROM act_delegate a
		<include refid="actDelegateJoins"/>
		<where>
			
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<insert id="batchInsert" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO act_delegate(
			id,
			task_id,
			delegate,
			delegated
		) VALUES 
		<foreach collection="list" separator="," item="delegate">
			(
				#{delegate.id},
				#{delegate.taskId},
				#{delegate.delegate},
				#{delegate.delegated}
			)
		</foreach>
	</insert>
	
	<insert id="insert" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO act_delegate(
			id,
			task_id,
			delegate,
			delegated
		) VALUES 
		(
			#{id},
			#{taskId},
			#{delegate},
			#{delegated}
		)
	</insert>
	
	<update id="update">
		UPDATE act_delegate SET 	
			task_id = #{taskId},
			delegate = #{delegate},
			delegated = #{delegated}
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM act_delegate
		WHERE task_id = #{taskId}
	</update>
	
</mapper>